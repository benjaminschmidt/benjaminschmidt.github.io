---
apiVersion: v1
kind: Pod
metadata:
  name: postgres-pod
spec:
  containers:
    - name: postgres-container
      image: docker.io/library/postgres:18.0
      ports:
        - containerPort: 5432
          hostPort: 5432
      envFrom:
        - secretRef:
            name: postgres-secret
      volumeMounts:
        - mountPath: /var/lib/postgresql
          name: postgres-data-volume
  volumes:
    - name: postgres-data-volume
      persistentVolumeClaim:
        claimName: postgres-data-volume-claim
---
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
type: Opaque
stringData:
  POSTGRES_USER: postgres
  POSTGRES_PASSWORD: postgres

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgres-data-volume-claim
spec:
  accessModes:
    - ReadWriteOnce
